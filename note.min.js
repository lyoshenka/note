(function(){bas64encode=function(a){a=""+a;if(0===a.length)return a;var d=function(a,b){var c=a.charCodeAt(b);if(255<c)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return c},c,b,f=[],e=a.length-a.length%3;for(c=0;c<e;c+=3)b=d(a,c)<<16|d(a,c+1)<<8|d(a,c+2),f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(b>>18)),f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(b>>12&63)),f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(b>>
6&63)),f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(b&63));switch(a.length-e){case 1:b=d(a,c)<<16;f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(b>>18)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(b>>12&63));break;case 2:b=d(a,c)<<16|d(a,c+1)<<8,f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(b>>18)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(b>>
12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(b>>6&63))}return f.join("")};var e=new XMLHttpRequest,h=window._note_bookmarklet_user_id||0,g=(window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null)||"";1E3<g.length&&(g=g.substring(997)+"...");e.onreadystatechange=function(){if(4===e.readyState){var a=JSON.parse(e.responseText),d=document.createElement("div"),
c=document.getElementsByTagName("body")[0],b=document.createTextNode(a.ok?"Noted.":"Error: "+a.error);d.style.cssText="position:fixed;height:32px;width:100%;text-align:center;top:0;left:0;padding:15px;z-index=999999;font-size:32px;color:#222;background-color:#f99";d.appendChild(b);c.appendChild(d);window.setTimeout(function(){b=null;c.removeChild(d)},a.ok?1E3:3E3);window._note_bookmarklet_user_id=null}};e.open("GET","//note.grin.io/note/"+h+"?u="+bas64encode(unescape(encodeURIComponent(window.location.href)))+
"&t="+bas64encode(unescape(encodeURIComponent(window.document.title)))+"&s="+bas64encode(unescape(encodeURIComponent(g))),!0);e.send()})();