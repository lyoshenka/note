(function(){bas64encode=function(a){a=""+a;if(0===a.length)return a;var d=function(a,c){var b=a.charCodeAt(c);if(255<b)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return b},b,c,f=[],e=a.length-a.length%3;for(b=0;b<e;b+=3)c=d(a,b)<<16|d(a,b+1)<<8|d(a,b+2),f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(c>>18)),f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(c>>12&63)),f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(c>>
6&63)),f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(c&63));switch(a.length-e){case 1:c=d(a,b)<<16;f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(c>>18)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(c>>12&63));break;case 2:c=d(a,b)<<16|d(a,b+1)<<8,f.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(c>>18)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(c>>
12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(c>>6&63))}return f.join("")};var e=new XMLHttpRequest,h=window._note_bookmarklet_user_id||0,g=(window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null)||"";1E3<g.length&&(g=g.substring(997)+"...");e.onreadystatechange=function(){if(4===e.readyState){var a=JSON.parse(e.responseText),d=document.createElement("div"),
b=document.getElementsByTagName("body")[0],c=document.createTextNode(a.ok?"Noted.":"Error: "+a.error);d.style.cssText="position:fixed;height:32px;width:100%;text-align:center;top:0;left:0;padding:15px;font-size:32px;color:#222;background-color:#f99";d.style.zIndex=2147483647;d.appendChild(c);b.appendChild(d);window.setTimeout(function(){b.removeChild(d)},a.ok?1E3:3E3);window._note_bookmarklet_user_id=null}};e.open("GET","//grinnote.herokuapp.com/note/"+h+"?u="+bas64encode(unescape(encodeURIComponent(window.location.href)))+
"&t="+bas64encode(unescape(encodeURIComponent(window.document.title)))+"&s="+bas64encode(unescape(encodeURIComponent(g))),!0);e.send()})();